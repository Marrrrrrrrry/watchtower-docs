import{_ as s,c as a,o as i,ae as n}from"./chunks/framework.CBQY1fUt.js";const k=JSON.parse('{"title":"Container selection","description":"","frontmatter":{},"headers":[],"relativePath":"container-selection.md","filePath":"container-selection.md","lastUpdated":1763853533000}'),t={name:"container-selection.md"};function l(r,e,o,p,h,c){return i(),a("div",null,[...e[0]||(e[0]=[n(`<h1 id="container-selection" tabindex="-1">Container selection <a class="header-anchor" href="#container-selection" aria-label="Permalink to &quot;Container selection&quot;">​</a></h1><p>By default, watchtower will watch all containers. However, sometimes only some containers should be updated.</p><p>There are two options:</p><ul><li><strong>Fully exclude</strong>: You can choose to exclude containers entirely from being watched by watchtower.</li><li><strong>Monitor only</strong>: In this mode, watchtower checks for container updates, sends notifications and invokes the <a href="https://marrrrrrrrry.github.io/watchtower/lifecycle-hooks/" target="_blank" rel="noreferrer">pre-check/post-check hooks</a> on the containers but does <strong>not</strong> perform the update.</li></ul><h2 id="full-exclude" tabindex="-1">Full Exclude <a class="header-anchor" href="#full-exclude" aria-label="Permalink to &quot;Full Exclude&quot;">​</a></h2><p>If you need to exclude some containers, set the <em>com.centurylinklabs.watchtower.enable</em> label to <code>false</code>. For clarity this should be set <strong>on the container(s)</strong> you wish to be ignored, this is not set on watchtower.</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-jOLtE" id="tab-BmmzI1W" checked><label data-title="dockerfile" for="tab-BmmzI1W">dockerfile</label><input type="radio" name="group-jOLtE" id="tab-YzJK-hY"><label data-title="docker run" for="tab-YzJK-hY">docker run</label><input type="radio" name="group-jOLtE" id="tab-EWJ0g4x"><label data-title="docker-compose" for="tab-EWJ0g4x">docker-compose</label></div><div class="blocks"><div class="language-docker vp-adaptive-theme active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">docker</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">LABEL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.centurylinklabs.watchtower.enable=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;false&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --label=com.centurylinklabs.watchtower.enable=false</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> someimage</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;3&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  someimage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">someimage</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    labels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;com.centurylinklabs.watchtower.enable=false&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></div></div><p>If instead you want to <a href="https://marrrrrrrrry.github.io/watchtower/arguments/#filter_by_enable_label" target="_blank" rel="noreferrer">only include containers with the enable label</a>, pass the <code>--label-enable</code> flag or the <code>WATCHTOWER_LABEL_ENABLE</code> environment variable on startup for watchtower and set the <em>com.centurylinklabs.watchtower.enable</em> label with a value of <code>true</code> on the containers you want to watch.</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-5LRNs" id="tab-Wab-nzQ" checked><label data-title="dockerfile" for="tab-Wab-nzQ">dockerfile</label><input type="radio" name="group-5LRNs" id="tab-AiKCTLx"><label data-title="docker run" for="tab-AiKCTLx">docker run</label><input type="radio" name="group-5LRNs" id="tab-8k5Cew9"><label data-title="docker-compose" for="tab-8k5Cew9">docker-compose</label></div><div class="blocks"><div class="language-docker vp-adaptive-theme active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">docker</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">LABEL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.centurylinklabs.watchtower.enable=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;true&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --label=com.centurylinklabs.watchtower.enable=true</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> someimage</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;3&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  someimage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">someimage</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    labels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;com.centurylinklabs.watchtower.enable=true&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></div></div><p>If you wish to create a monitoring scope, you will need to <a href="https://containrrr.dev/watchtower/running-multiple-instances/" target="_blank" rel="noreferrer">run multiple instances and set a scope for each of them</a>.</p><p>Watchtower filters running containers by testing them against each configured criteria. A container is monitored if all criteria are met. For example:</p><ul><li><p>If a container&#39;s name is on the monitoring name list (not empty <code>--name</code> argument) but it is not enabled (centurylinklabs.watchtower.enable=false), it won&#39;t be monitored;</p></li><li><p>If a container&#39;s name is not on the monitoring name list (not empty <code>--name</code> argument), even if it is enabled (centurylinklabs.watchtower.enable=true and <code>--label-enable</code> flag is set), it won&#39;t be monitored;</p></li></ul><h2 id="monitor-only" tabindex="-1">Monitor Only <a class="header-anchor" href="#monitor-only" aria-label="Permalink to &quot;Monitor Only&quot;">​</a></h2><p>Individual containers can be marked to only be monitored (without being updated).</p><p>To do so, set the com.centurylinklabs.watchtower.monitor-only label to <code>true</code> on that container.</p><div class="language-docker vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">docker</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">LABEL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.centurylinklabs.watchtower.monitor-only=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;true&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Or, it can be specified as part of the <code>docker run</code> command line:</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --label=com.centurylinklabs.watchtower.monitor-only=true</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> someimage</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>When the label is specified on a container, watchtower treats that container exactly as if <code>WATCHTOWER_MONITOR_ONLY</code>was set, but the effect is limited to the individual container.</p>`,19)])])}const u=s(t,[["render",l]]);export{k as __pageData,u as default};
