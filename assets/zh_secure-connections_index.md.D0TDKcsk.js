import{_ as a,c as i,o as e,ae as n}from"./chunks/framework.CBQY1fUt.js";const o=JSON.parse('{"title":"安全连接","description":"","frontmatter":{},"headers":[],"relativePath":"zh/secure-connections/index.md","filePath":"zh/secure-connections/index.md","lastUpdated":1763853533000}'),t={name:"zh/secure-connections/index.md"};function r(l,s,p,h,c,k){return e(),i("div",null,[...s[0]||(s[0]=[n(`<h1 id="安全连接" tabindex="-1">安全连接 <a class="header-anchor" href="#安全连接" aria-label="Permalink to &quot;安全连接&quot;">​</a></h1><p>Watchtower 能够连接到通过 SSL/TLS 保护的 Docker 端点。如果你使用 <em>docker-machine</em> 预配远程 Docker 主机，只需将 <em>docker-machine</em> 生成的证书挂载到 watchtower 容器中，并可选地指定 <code>--tlsverify</code> 标志。</p><p>可以通过为目标主机执行 <code>docker-machine env</code> 命令来找到对应的 <em>docker-machine</em> 证书位置（注意该命令返回的 <code>DOCKER_HOST</code> 与 <code>DOCKER_CERT_PATH</code> 环境变量的值）。需要将远程主机对应的证书目录挂载到 watchtower 容器的 <em>/etc/ssl/docker</em>。</p><p>在将证书挂载到 watchtower 容器后，你需要通过 <code>--tlsverify</code> 标志启用证书验证：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> watchtower</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DOCKER_HOST=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$DOCKER_HOST </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DOCKER_CERT_PATH=/etc/ssl/docker</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $DOCKER_CERT_PATH</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:/etc/ssl/docker</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  marrrrrrrrry/watchtower</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --tlsverify</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div>`,5)])])}const C=a(t,[["render",r]]);export{o as __pageData,C as default};
